---
import type {
  BlockGrid,
  BlockMarkdown,
  BlockPhoto,
  BlockRichtext,
  Note,
} from "src/types/directus-schema";
import BlockPhotoRenderer from "./directus/BlockPhotoRenderer.astro";
import BlockGridRenderer from "./directus/BlockGridRenderer.astro";
import BlockMarkdownRenderer from "./directus/BlockMarkdownRenderer.astro";
const note: Note = Astro.props.item.data;
---

{
  note.blocks.map((block) => {
    const { collection, item } = block;

    if (collection === "block_richtext") {
      const block = item as BlockRichtext;
      return <div data-id={block.id} set:html={block.content} />;
    }

    if (collection === "block_markdown") {
      const block = item as BlockMarkdown;
      return <BlockMarkdownRenderer block={block} />;
    }

    if (collection === "block_photo") {
      return <BlockPhotoRenderer photo={item as BlockPhoto} />;
    }

    if (collection === "block_grid") {
      return <BlockGridRenderer grid={item as BlockGrid} />;
    }
  })
}
